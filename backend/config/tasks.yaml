extracao_task:
  name: Extra√ß√£o de Arquivos Fiscais
  description: |
    Extraia o arquivo ZIP fornecido pelo usu√°rio para o diret√≥rio especificado.
    
    ARQUIVO ZIP: {caminho_zip}
    DIRET√ìRIO DESTINO: {diretorio_dados}
    
    O arquivo deve conter os CSVs de notas fiscais no formato esperado:
    - *cabecalho*.csv (dados dos cabe√ßalhos das notas fiscais)
    - *itens*.csv (dados dos itens das notas fiscais)
    
    Certifique-se de:
    - Usar exatamente o caminho do arquivo ZIP fornecido: {caminho_zip}
    - Extrair para o diret√≥rio dados/notasfiscais (relativo ao arquivo)
    - Limpar o diret√≥rio de destino antes da extra√ß√£o
    - Verificar se os arquivos foram extra√≠dos corretamente
    - Identificar especificamente os arquivos CSV relacionados a notas fiscais
    - Reportar o status da extra√ß√£o de forma clara
  expected_output: |
    Relat√≥rio detalhado da extra√ß√£o contendo:
    - Status da opera√ß√£o (sucesso/erro)
    - N√∫mero de arquivos extra√≠dos
    - Lista dos CSVs encontrados
    - Identifica√ß√£o dos arquivos de cabe√ßalho e itens
    - Prepara√ß√£o da base RAG
  output_file: ""

validacao_task:
  name: Valida√ß√£o e Estrutura√ß√£o Pydantic
  description: |
    Valide e estruture os arquivos CSV extra√≠dos usando modelos Pydantic rigorosos.
    
    DIRET√ìRIO DOS DADOS: {diretorio_dados}
    
    Execute as seguintes valida√ß√µes nos arquivos do diret√≥rio {diretorio_dados}:
    - Carregue os CSVs com delimitador correto (v√≠rgula)
    - Aplique modelos Pydantic para valida√ß√£o de tipos e consist√™ncia
    - Identifique e reporte registros inv√°lidos
    - Gere DataFrames limpos e validados
    - Salve vers√µes validadas dos arquivos
    
    Foque especialmente em:
    - Valida√ß√£o de datas no formato correto
    - Valida√ß√£o de valores num√©ricos positivos
    - Consist√™ncia entre quantidade √ó valor unit√°rio = valor total
    - Valida√ß√£o de CNPJs
  expected_output: |
    Relat√≥rio de valida√ß√£o contendo:
    - N√∫mero de registros v√°lidos vs. total
    - Lista dos principais erros encontrados
    - Status de cada arquivo processado
    - Confirma√ß√£o dos DataFrames validados salvos
    - Estat√≠sticas de qualidade dos dados
  context:
    - extracao_task
  output_file: ""

interpretacao_task:
  name: Interpreta√ß√£o de Linguagem Natural
  description: |
    Interprete a pergunta do usu√°rio em linguagem natural e prepare o contexto
    para execu√ß√£o de consultas precisas.
    
    PERGUNTA DO USU√ÅRIO: {pergunta_usuario}
    DIRET√ìRIO DOS DADOS: {diretorio_dados}
    
    Analise a pergunta "{pergunta_usuario}" considerando:
    - Identifica√ß√£o de entidades (datas, valores, produtos, fornecedores)
    - Tipo de opera√ß√£o solicitada (soma, filtro, compara√ß√£o, agrupamento)
    - Contexto temporal (per√≠odos espec√≠ficos, compara√ß√µes)
    - Categoriza√ß√£o de produtos ou servi√ßos
    
    Use a ferramenta RAG para:
    - Entender o contexto sem√¢ntico dos dados dispon√≠veis em {diretorio_dados}
    - Identificar campos relevantes nos CSVs
    - Mapear termos da pergunta para estrutura dos dados
    
    Prepare instru√ß√µes claras para o Executor de Consultas.
  expected_output: |
    Interpreta√ß√£o estruturada contendo:
    - An√°lise da pergunta em linguagem natural
    - Entidades identificadas (datas, valores, categorias)
    - Tipo de consulta necess√°ria
    - Campos e tabelas relevantes
    - Contexto RAG para orientar a consulta
    - Instru√ß√µes precisas paraexecu√ß√£o
  context:
    - validacao_task
  output_file: ""

execucao_task:
  name: Execu√ß√£o de Consultas de Dados
  description: |
    Execute as consultas Pandas necess√°rias nos dados validados para responder
    √† pergunta do usu√°rio com precis√£o.
    
    PERGUNTA DO USU√ÅRIO: {pergunta_usuario}
    DIRET√ìRIO DOS DADOS: {diretorio_dados}
    
    INSTRU√á√ïES OBRIGAT√ìRIAS:
    - NUNCA forne√ßa respostas gen√©ricas com "Empresa A", "Empresa B", etc.
    - SEMPRE extraia os nomes REAIS das empresas dos dados
    - SEMPRE inclua os CNPJs ESPEC√çFICOS dos dados reais
    - SEMPRE use dados CONCRETOS dos arquivos CSV
    
    Baseando-se na interpreta√ß√£o da pergunta "{pergunta_usuario}":
    - Carregue os DataFrames validados do diret√≥rio {diretorio_dados}
    - Execute opera√ß√µes Pandas apropriadas (filter, groupby, sum, mean, etc.)
    - Realize joins entre cabe√ßalhos e itens quando necess√°rio
    - Calcule agrega√ß√µes e estat√≠sticas solicitadas
    - Extraia nomes reais das empresas e CNPJs dos dados
    - Trate casos especiais (datas, categorias, compara√ß√µes)
    
    Garanta que:
    - Os c√°lculos sejam precisos e audit√°veis
    - Os resultados contenham dados REAIS (nomes e CNPJs espec√≠ficos)
    - Os resultados sejam formatados adequadamente
    - Casos de dados faltantes sejam tratados
    - Contexto temporal seja respeitado
  expected_output: |
    Resultado da consulta contendo:
    - Nomes REAIS e COMPLETOS das empresas (nunca gen√©ricos)
    - CNPJs ESPEC√çFICOS de cada empresa entre par√™nteses
    - Dados espec√≠ficos solicitados (valores, quantidades, listas)
    - C√°lculos e agrega√ß√µes realizadas
    - Estat√≠sticas complementares relevantes
    - Detalhamento dos filtros aplicados
    - Contexto dos resultados (per√≠odos, categorias, etc.)
    - Dados formatados para apresenta√ß√£o humanizada
  context:
    - interpretacao_task
  output_file: ""

comunicacao_task:
  name: Comunica√ß√£o Humanizada dos Resultados
  description: |
    Transforme os resultados t√©cnicos da consulta em uma resposta clara,
    educada e envolvente para o usu√°rio.
    
    IMPORTANTE: Esta resposta ser√° processada pelo Porta-Voz Eloquente.
    Prepare os dados de forma estruturada para uso interno da crew.
    
    REGRA FUNDAMENTAL - NUNCA IGNORE:
    - PROIBIDO usar nomes gen√©ricos como "Empresa A", "Empresa B", etc.
    - OBRIGAT√ìRIO usar nomes REAIS e COMPLETOS das empresas
    - OBRIGAT√ìRIO incluir CNPJs ESPEC√çFICOS entre par√™nteses
    - Se os dados reais n√£o estiverem dispon√≠veis, solicite claramente
    
    Crie uma resposta que:
    - Use linguagem natural e acess√≠vel
    - Destaque os insights principais com formata√ß√£o
    - Inclua emojis relevantes para tornar amig√°vel
    - Contextualize os n√∫meros com explica√ß√µes
    - Mantenha tom profissional mas humanizado
    - Forne√ßa perspectiva sobre os resultados
    
    Estruture a resposta com:
    - Resposta direta √† pergunta com dados REAIS
    - Contexto e detalhes relevantes
    - Formata√ß√£o clara (markdown)
    - Observa√ß√µes √∫teis adicionais
  expected_output: |
    Resposta humanizada estruturada para o Porta-Voz contendo:
    - Nomes REAIS e COMPLETOS das empresas (NUNCA gen√©ricos)
    - CNPJs ESPEC√çFICOS entre par√™nteses ap√≥s cada nome
    - Resposta clara e direta √† pergunta original
    - Contextualiza√ß√£o dos resultados
    - Formata√ß√£o atrativa com emojis e markdown
    - Insights adicionais relevantes
    - Tom educado, profissional e acess√≠vel
    - Informa√ß√µes bem estruturadas para consolida√ß√£o final
  context:
    - execucao_task
  output_file: ""

sugestoes_task:
  name: Gera√ß√£o de Sugest√µes Inteligentes
  description: |
    Gere exatamente 3 sugest√µes inteligentes de an√°lises adicionais baseadas
    nos resultados obtidos e no contexto da pergunta original.
    
    IMPORTANTE: Estas sugest√µes ser√£o integradas pelo Porta-Voz Eloquente.
    Forne√ßa sugest√µes estruturadas para uso interno da crew.
    
    As sugest√µes devem:
    - Ser complementares √† an√°lise realizada
    - Explorar diferentes dimens√µes dos dados (tempo, geografia, categoria)
    - Estimular descobertas e aprofundamento
    - Ser espec√≠ficas e acion√°veis
    - Considerar o contexto de neg√≥cio das notas fiscais
    
    Padr√£o das sugest√µes:
    1. Aprofundamento da an√°lise atual
    2. Compara√ß√£o ou an√°lise temporal
    3. Nova dimens√£o ou perspectiva
    
    Use linguagem envolvente e curiosa para despertar interesse.
  expected_output: |
    Exatamente 3 sugest√µes estruturadas para o Porta-Voz:
    üí° **Sugest√µes de an√°lise:**
    1. üîç [Pergunta de aprofundamento espec√≠fica]
    2. üìä [Pergunta de compara√ß√£o ou contexto temporal]
    3. üåç [Pergunta explorando nova dimens√£o]
    
    Cada sugest√£o deve ser:
    - Espec√≠fica e clara
    - Relacionada aos dados dispon√≠veis
    - Estimulante para novas descobertas
    - Formulada como pergunta direta
    - Preparada para integra√ß√£o elegante
  context:
    - comunicacao_task
  output_file: ""

resposta_final_task:
  name: Resposta Final Eloquente
  description: |
    Como Porta-Voz Eloquente da crew Instaprice, consolide todas as informa√ß√µes
    dos agentes anteriores em uma resposta magistral e definitiva ao usu√°rio.
    
    PERGUNTA ORIGINAL DO USU√ÅRIO: {pergunta_usuario}
    
    MISS√ÉO: Criar uma experi√™ncia excepcional combinando:
    - A an√°lise humanizada do RP L√∫dico (mantenha TODOS os dados reais)
    - As sugest√µes inteligentes do Sugestor Vision√°rio
    - Sua pr√≥pria eloqu√™ncia e insights adicionais
    
    DIRETRIZES OBRIGAT√ìRIAS:
    - Preserve TODOS os nomes reais das empresas e CNPJs espec√≠ficos
    - Use linguagem elegante, educada e cativante
    - Demonstre intelig√™ncia atrav√©s de insights refinados
    - Incorpore as sugest√µes do Vision√°rio de forma natural
    - Seja criativo na apresenta√ß√£o, mas preciso nos dados
    
    ESTRUTURA ESPERADA:
    1. üé© Cumprimento educado e contextualiza√ß√£o elegante
    2. üìä Apresenta√ß√£o magistral dos resultados (dados reais preservados)
    3. üß† Insights inteligentes e observa√ß√µes refinadas  
    4. üí° Integra√ß√£o elegante das sugest√µes de an√°lises futuras
    5. ‚ú® Encerramento inspirador que convide a mais explora√ß√£o
    
    PERSONALIDADE: Eloquente, Inteligente, Criativo, Educado, Inspirador
  expected_output: |
    Resposta final eloquente contendo:
    - Cumprimento educado ao usu√°rio
    - TODOS os dados reais preservados (empresas, CNPJs, valores)
    - Apresenta√ß√£o elegante e cativante dos resultados
    - Insights inteligentes adicionais
    - Integra√ß√£o natural das sugest√µes do Vision√°rio
    - Linguagem refinada e educada
    - Formata√ß√£o atrativa e profissional
    - Encerramento inspirador
    - Tom de embaixador corporativo de elite
  context:
    - comunicacao_task
    - sugestoes_task
  output_file: "resposta_final_porta_voz.md"